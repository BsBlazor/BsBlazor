@namespace BsBlazor
@inject IModalService ModalService
@if (ConcreteModalService != null)
{
    foreach (var modalReference in ConcreteModalService.ModalReferences)
    {
        BsModal? currentRef = null;
        <BsModal @key="modalReference"
                     @ref="currentRef"
                     ShowWhenRendered
                     OnHidden="modalReference.InvokHidden">
            @{ modalReference.Initialize(currentRef!); }
            <CascadingValue TValue="IModalReference" IsFixed Value="modalReference">
                <DynamicComponent Type="modalReference.DialogType" />
            </CascadingValue>
        </BsModal>
    }
}
@code {
    private ModalService? ConcreteModalService => ModalService as ModalService;
    protected override void OnInitialized()
    {
        if (ConcreteModalService == null) { return; }
        ConcreteModalService.OnModalAdded += (modalReference) => StateHasChanged();
        ConcreteModalService.OnModalRemoved += (modalReference) => StateHasChanged();
    }
}
