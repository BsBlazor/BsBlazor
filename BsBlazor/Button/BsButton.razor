@namespace BsBlazor
<button type="@Type.ToString().ToLower()"
        class="@CssBuilder"
        @onclick="@(() => OnClick.InvokeAsync())"
        @attributes="_additionalAttributes">
    @ChildContent
</button>
@code {
    private CssBuilder CssBuilder => CssBuilder.Default("btn")
        .AddClass("btn-lg", Size == BsButtonSize.Large)
        .AddClass("btn-sm", Size == BsButtonSize.Small)
        .AddClass($"btn-{Variant.ToKebabCase()}", Variant != BsButtonVariant.None);

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public BsButtonVariant Variant { get; set; }

    [Parameter]
    public BsButtonSize Size { get; set; }

    [Parameter]
    public BsButtonType Type { get; set; } = BsButtonType.Button;

    [Parameter]
    public BsButtonDismiss? Dismiss { get; set; }

    [Parameter]
    public BsButtonTogle? Toggle { get; set; }

    [Parameter]
    public string? Target { get; set; }

    [Parameter]
    public EventCallback OnClick { get; set; }

    private Dictionary<string, object> _additionalAttributes = [];

    protected override void OnParametersSet()
    {
        _additionalAttributes = new Dictionary<string, object>();
        if(Dismiss != null)
        {
            _additionalAttributes["data-bs-dismiss"] = Dismiss.ToString()!.ToLower();
        }
        if(Toggle != null)
        {
            _additionalAttributes["data-bs-toggle"] = Toggle.ToString()!.ToLower();
        }
        if(Target != null)
        {
            _additionalAttributes["data-bs-target"] = Target;
        }
    }
}